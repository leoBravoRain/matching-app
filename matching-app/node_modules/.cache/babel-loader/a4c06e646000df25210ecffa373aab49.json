{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/leo/Desktop/matchingApp/matching-app/src/screens/publicProfile/publicProfile.screen.js\";\nimport React from \"react\"; // import { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n// material ui\n\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport { Button, Box } from \"@material-ui/core\";\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from \"@material-ui/core/CircularProgress\"; // import FavoriteBorder from '@material-ui/icons/FavoriteBorder';\n// import LiveTv from '@material-ui/icons/LiveTv';\n\nimport { fs, auth } from \"../../libraries/firebase/firebase\"; // //  component\n// import WorkshopComponent from \"./components/workshop.component\";\n// import OverviewWorkshop from \"./components/overviewWorkshop.component\";\n// firebase\n// import { auth } from \"../../config/firebase\";\n// import { fs } from \"../../config/firebase\";\n\nclass PublicProfile extends React.Component {\n  // constructor\n  constructor(props) {\n    // constructur of parent\n    super(props); // initial states\n\n    this.state = {\n      loading: true // workshopsByCategory: null,\n      // garbagesPerDay: [],\n      // email: \"\",\n      // password: \"\",\n\n    };\n    this.likeToUser = this.likeToUser.bind(this);\n  }\n\n  componentDidMount() {\n    // temp\n    this.setState({\n      loading: false // matchesWithUsers: matchesWithUsers,\n\n    }); // // check if user is logged\n    // auth.onAuthStateChanged((user) => {\n    //     if (!user) {\n    //         // console.log(\"user not logged\");\n    //         this.props.history.push('/');\n    //         // console.log(\"aosjid\");\n    //     }\n    //     else {\n    //         // console.log(\"user logged\");\n    //         // alert(\"user logged\");\n    //         // this.props.history.push('/login/');\n    //         // this.setState({\n    //         //     userId: user.uid,\n    //         // });\n    //         // get number of garbage\n    //         // fs.collection('oneGarbagePerDay').doc(this.state.userId).collection(\"oneGarbagePerDay\").\n    //         //     get().then(snapshotquery => {\n    //         //         // // get data from API\n    //         //         var garbages = [];\n    //         //         // iterate over each item\n    //         //         snapshotquery.forEach(doc => {\n    //         //             // console.log(doc.data());\n    //         //             let garbage = doc.data();\n    //         //             // store location\n    //         //             // loteo[\"location\"] = [loteo.location.latitude, loteo.location.longitude];\n    //         //             // garbage[\"id\"] = doc.id;\n    //         //             // add loteo to list\n    //         //             garbages.push(garbage);\n    //         //         });\n    //         //         // update state\n    //         //         this.setState({\n    //         //             // flag of getting data from API\n    //         //             get_garbages: true,\n    //         //             // update garbages\n    //         //             garbagesPerDay: garbages,\n    //         //             loading: false,\n    //         //         },\n    //         //             // () => {\n    //         //             //     console.log(this.state.garbages)\n    //         //             // }\n    //         //         );\n    //         //     });\n    //     }\n    // });\n  }\n\n  likeToUser() {\n    // check if user is logged\n    auth.onAuthStateChanged(user => {\n      if (!user) {\n        console.log(\"user not logged\");\n        alert(\"You need an account in our platform in order to 'give likes'\"); // this.props.history.push('/');\n        // console.log(\"aosjid\");\n      } else {\n        // get logged user\n        fs.collection(\"users\").doc(user.uid).get().then(doc_ => {\n          var loggedUser = doc_.data();\n          loggedUser[\"id\"] = doc_.id; // get user to give like\n\n          fs.collection(\"users\").doc(this.props.match.params.userId).get().then(doc => {\n            var likeUser = doc.data();\n            likeUser[\"id\"] = doc.id;\n            console.log(\"logged: \", doc_.id);\n            console.log(\"like: \", doc.id); // test\n\n            likeUser.likesToUsers.push(doc_.id);\n            loggedUser.likesToUsers.push(doc.id); // console.log(likeUser.likesToUsers);\n\n            console.log(\"logged: \", loggedUser);\n            console.log(\"like: \", likeUser); // check if match already exists\n\n            if (likeUser.matches.includes(loggedUser.id) & loggedUser.matches.includes(likeUser.id)) {} // check if users are both with likes (match)\n\n\n            if (likeUser.likesToUsers.includes(loggedUser.id) & loggedUser.likesToUsers.includes(likeUser.id)) {// console.log(\"match\");\n            } else {\n              console.log(\"other person don't like you\");\n            } // update users\n            // matches: if they did match\n            // likes form users: on both\n            // likes to Users: from the logged one\n\n          });\n        }); // update user to give like \n        // update logged user\n        // update matches on logged user\n      }\n    });\n  }\n\n  render() {\n    // return method\n    return /*#__PURE__*/_jsxDEV(Container, {\n      style: {// margin: 20,\n        // padding: 20,\n        // backgroundColor: \"red\",\n      },\n      children: !this.state.loading ? /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          style: {\n            margin: 15,\n            padding: 5\n          },\n          elevation: 5,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"h6\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: \"Hi!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"p\",\n            component: \"body2\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: \"You can give me \\\"like me\\\" if I like you :) If I gave you like too, so we will do match :) and we will be notified, otherwise I will never know you gave me like :), so don't worry about it!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: () => {\n              // alert(\"If I give you like too, we will do match, otherwise I will never know you gave me like :)\")\n              this.likeToUser();\n            },\n            children: \"Like me\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"p\",\n            component: \"body2\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: \"If you don't have an account yet, register here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: () => {\n              // alert(\"Go to register\");\n              // this.s\n              this.props.history.push('/register');\n            },\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default PublicProfile;","map":{"version":3,"sources":["/home/leo/Desktop/matchingApp/matching-app/src/screens/publicProfile/publicProfile.screen.js"],"names":["React","Paper","Container","Button","Box","Typography","CircularProgress","fs","auth","PublicProfile","Component","constructor","props","state","loading","likeToUser","bind","componentDidMount","setState","onAuthStateChanged","user","console","log","alert","collection","doc","uid","get","then","doc_","loggedUser","data","id","match","params","userId","likeUser","likesToUsers","push","matches","includes","render","margin","padding","textAlign","history"],"mappings":"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","sourcesContent":["import React from \"react\";\n\n// import { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\n// material ui\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport { Button, Box } from \"@material-ui/core\";\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n// import FavoriteBorder from '@material-ui/icons/FavoriteBorder';\n// import LiveTv from '@material-ui/icons/LiveTv';\n\nimport {\n    fs,\n    auth,\n} from \"../../libraries/firebase/firebase\";\n\n// //  component\n// import WorkshopComponent from \"./components/workshop.component\";\n// import OverviewWorkshop from \"./components/overviewWorkshop.component\";\n\n// firebase\n// import { auth } from \"../../config/firebase\";\n// import { fs } from \"../../config/firebase\";\n\n\nclass PublicProfile extends React.Component {\n\n    // constructor\n    constructor(props) {\n\n        // constructur of parent\n        super(props);\n\n        // initial states\n        this.state = {\n            loading: true,\n            // workshopsByCategory: null,\n            // garbagesPerDay: [],\n            // email: \"\",\n            // password: \"\",\n        }\n        \n        this.likeToUser = this.likeToUser.bind(this);\n\n    }\n\n    componentDidMount() {\n\n        // temp\n        this.setState({\n            loading: false,\n            // matchesWithUsers: matchesWithUsers,\n        });\n\n        // // check if user is logged\n        // auth.onAuthStateChanged((user) => {\n\n        //     if (!user) {\n\n        //         // console.log(\"user not logged\");\n\n        //         this.props.history.push('/');\n\n        //         // console.log(\"aosjid\");\n\n        //     }\n\n        //     else {\n\n        //         // console.log(\"user logged\");\n        //         // alert(\"user logged\");\n\n        //         // this.props.history.push('/login/');\n\n        //         // this.setState({\n        //         //     userId: user.uid,\n        //         // });\n\n        //         // get number of garbage\n        //         // fs.collection('oneGarbagePerDay').doc(this.state.userId).collection(\"oneGarbagePerDay\").\n        //         //     get().then(snapshotquery => {\n\n        //         //         // // get data from API\n        //         //         var garbages = [];\n\n        //         //         // iterate over each item\n        //         //         snapshotquery.forEach(doc => {\n\n        //         //             // console.log(doc.data());\n        //         //             let garbage = doc.data();\n        //         //             // store location\n        //         //             // loteo[\"location\"] = [loteo.location.latitude, loteo.location.longitude];\n        //         //             // garbage[\"id\"] = doc.id;\n        //         //             // add loteo to list\n        //         //             garbages.push(garbage);\n\n        //         //         });\n\n        //         //         // update state\n        //         //         this.setState({\n\n        //         //             // flag of getting data from API\n        //         //             get_garbages: true,\n        //         //             // update garbages\n        //         //             garbagesPerDay: garbages,\n\n        //         //             loading: false,\n\n        //         //         },\n\n        //         //             // () => {\n        //         //             //     console.log(this.state.garbages)\n        //         //             // }\n        //         //         );\n\n        //         //     });\n\n\n        //     }\n\n        // });\n\n    }\n    \n    likeToUser() {\n        \n        // check if user is logged\n        auth.onAuthStateChanged((user) => {\n            \n            if (!user) {\n                \n                console.log(\"user not logged\");\n                \n                alert(\"You need an account in our platform in order to 'give likes'\");\n                \n                // this.props.history.push('/');\n                \n                // console.log(\"aosjid\");\n                \n            }\n            \n            else {\n                \n                // get logged user\n                fs.collection(\"users\").doc(user.uid).get()\n                .then(doc_ => {\n\n                    var loggedUser = doc_.data();\n                    loggedUser[\"id\"] = doc_.id;\n\n                    // get user to give like\n                    fs.collection(\"users\").doc(this.props.match.params.userId).get()\n                    .then(doc => {\n    \n                        var likeUser = doc.data();\n                        likeUser[\"id\"] = doc.id;\n\n                        console.log(\"logged: \", doc_.id);\n                        console.log(\"like: \", doc.id);\n                        \n                        // test\n                        likeUser.likesToUsers.push(doc_.id);\n                        loggedUser.likesToUsers.push(doc.id);\n                        \n                        // console.log(likeUser.likesToUsers);\n                        console.log(\"logged: \", loggedUser);\n                        console.log(\"like: \", likeUser);\n\n                        // check if match already exists\n                        if (likeUser.matches.includes(loggedUser.id) & loggedUser.matches.includes(likeUser.id)) {\n\n                        }\n\n                        // check if users are both with likes (match)\n                        if (likeUser.likesToUsers.includes(loggedUser.id) & loggedUser.likesToUsers.includes(likeUser.id)) {\n                            // console.log(\"match\");\n\n\n                        }\n                        else {\n                            console.log(\"other person don't like you\");\n                            \n                        }\n\n                        // update users\n                        // matches: if they did match\n                        // likes form users: on both\n                        // likes to Users: from the logged one\n                    })\n\n\n                    \n                })\n                \n                // update user to give like \n               \n                // update logged user\n               \n                // update matches on logged user\n\n            }\n\n        });\n\n\n    }\n\n    render() {\n\n        // return method\n        return (\n\n            <Container\n                style={{\n                    // margin: 20,\n                    // padding: 20,\n                    // backgroundColor: \"red\",\n                }}\n            >\n\n                {\n                    !this.state.loading\n\n                        ?\n\n                        <Container>\n\n                            {/* title */}\n                            <Paper\n                                style={{\n                                    margin: 15,\n                                    padding: 5,\n                                }}\n\n                                elevation={5}\n                            >\n                                <Typography variant=\"h6\" component=\"h6\" style={{ textAlign: \"center\", }}>\n\n                                    Hi!\n\n                                </Typography>\n\n                                <Typography variant=\"p\" component=\"body2\" style={{ textAlign: \"center\", }}>\n\n                                    You can give me \"like me\" if I like you :) If I gave you like too, so we will do match :) and we will be notified, otherwise I will never know you gave me like :), so don't worry about it!\n\n                                </Typography>\n\n                                {/* like button */}\n                                <Button \n                                    variant=\"contained\" \n                                    color=\"primary\"\n                                    onClick={() => {\n                                        // alert(\"If I give you like too, we will do match, otherwise I will never know you gave me like :)\")\n                                        this.likeToUser();\n                                    }}\n                                >\n                                    Like me\n                                </Button>\n\n                                <Typography variant=\"p\" component=\"body2\" style={{ textAlign: \"center\", }}>\n\n                                    If you don't have an account yet, register here\n\n                                </Typography>\n                                \n                                <Button\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    onClick={() => {\n                                        // alert(\"Go to register\");\n                                        // this.s\n                                        this.props.history.push('/register');\n                                    }}\n                                >\n                                    Register\n                                </Button>\n\n                            </Paper>\n\n                        </Container>\n\n                        :\n\n                        <CircularProgress />\n\n                }\n\n            </Container>\n        );\n\n    }\n\n}\n\nexport default PublicProfile;"]},"metadata":{},"sourceType":"module"}